<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPI-AMRVAC: Example simulations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MPI-AMRVAC
   &#160;<span id="projectnumber">3.1</span>
   </div>
   <div id="projectbrief">The MPI - Adaptive Mesh Refinement - Versatile Advection Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example simulations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes a few relatively simple example simulations which can be done based on some readily available tests in amrvac/tests/</p>
<h1>Advection tests</h1>
<p>Configure MPI-AMRVAC to the standard 2D <a class="el" href="md_doc_equations.html#eq_rho">advection equation</a> test as follows: cd amrvac/tests/rho/vac setup.pl -d=2 make mpirun -np 2 amrvac</p>
<p>This test contains several tests, distinguished by <b>iprob</b>. In the above setting, it will use <b>iprob=3</b> as specified in the <a class="el" href="md_doc_par.html#par_meshlist">meshlist</a> and do a 2D advection of the VAC-logo on a double periodic domain, on the unit square. After <a class="el" href="md_doc_convert.html">converting</a> the 21 data files created to the VTK format suited for paraview visualization, you will be able to make the following movie in a few simple steps:</p>
<p><img src="vaclogo.gif" alt="" class="inline" title="2D VAC logo advection"/></p>
<p>Its default settings is to perform one advection over the full diagonal, use 3 AMR levels, and have a base level 1 resolution of 50 by 50 (split in 10 by 10 grid blocks).</p>
<p>A 3D variant is to do the advection of a sphere along the diagonal of a cube. This is selected by (iprob=6 in the amrvac.par file) </p><pre class="fragment">cd amrvac/tests/rho/auto_3d
setup.pl -d=3
make
mpirun -np 2 amrvac
</pre><p> A second, 2D test runs <b>iprob=1</b> by doing </p><pre class="fragment">cd amrvac/tests/hd/Kelvin_Helmholtz_2D
setup.pl -d=2
make
mpirun -np 2 amrvac
</pre><p> It sets up a sheared horizontal velocity field (a <em>tanh</em> profile), augmented with a small sinusoidal vertical displacement centered on the velocity shear region. This situation is Kelvin-Helmholtz unstable, and a vortical flow pattern develops. After converting and using paraview, you can create frames as shown below.</p>
<p><img src="khadiabAfigt0.gif" alt="" class="inline" title="2D adiabatic HD Kelvin-Helmholtz development t=0"/></p>
<p><img src="khadiabAfigfinal.gif" alt="" class="inline" title="2D adiabatic HD Kelvin-Helmholtz development"/></p>
<h1>HD tests</h1>
<p>The examples realizing relatively standard test cases for <a class="el" href="md_doc_equations.html#eq_hd">hydrodynamics</a> include </p><pre class="fragment">amrvac/tests/hd/Woodward_Collela_2D
amrvac/tests/hd/bow_cylindrical_2D
amrvac/tests/hd/Rayleigh_Taylor_2D
amrvac/tests/hd/Richtmyer_Meshkov_dust_2D
amrvac/tests/hd/Riemann_pole_2D
amrvac/tests/hd/implosion
</pre><p> The first one listed is the Woodward and Collela shock reflection problem, on a 2D cartesian grid. It is a nice illustration on how to code up some non-trivial special boundary conditions (spatio-temporally varying). The second is a supersonic flow hitting a cylinder, and demonstrates the use of a cylindrical grid. The third uses an external constant gravitational field to simulate the development of a Rayleigh-Taylor instability when a heavy density gas rests on top of a light one. The fourth test concentrates on the Richtmyer-Meshkov variant of the Rayleigh-Taylor instability, by letting a shock impinge on an inclined density discontinuity. The fifth test does a standard 1D Riemann problem (the Sod problem) on a 2D polar grid, to show how the boundary conditions need to be set for a symmetry axis. The final test could be run in 2D and 3D, and studies the multiple reflection of shocks in a box, where one can vary the schemes at will, to see how the small-scale structure (combinations of Richtmeyer-Meshkov and Kelvin- Helmholtz behaviour) are influenced by resolution, discretization etc. It is also useful to see which schemes maintain the symmetry about the diagonal.</p>
<p>Impressions for some of these tests are shown below:</p>
<p><img src="bowshock.gif" alt="" class="inline" title="2D HD steady bow shock"/></p>
<p><img src="rthd2dnew.gif" alt="" class="inline" title="rayleigh-taylor 2D case"/></p>
<p>This Rayleigh Taylor test (july 2011) can be repeated with 7 refinement levels, it then takes 11375 seconds (on a 4 CPU macBook pro, a bit over 3 hours, all IO included).</p>
<p><img src="liska.png" alt="" class="inline" title="Shocks in box 2D case"/></p>
<p>The above 'liska' test is a nice one to test symmetry-preserving properties for schemes, and to compare effects of resolution (by raising the number of AMR levels). On my MacBook Pro (june 2011), a quadcore CPU with 8GB memory, I can run a 6 level version (base resolution 24 x 24) up to time t=2.5 in less than 12000 seconds (slightly over 3 hours).</p>
<h1>MHD tests</h1>
<p>The amrvac/tests/mhd codes up a large variety of standard test cases for <a class="el" href="md_doc_equations.html#eq_mhd">MHD</a>, going from 1D Riemann problems to tests doable in 2D and 3D.</p>
<p>One of the tests is the Orszag-Tang test, in the compressible regime, for which an animation is shown below.</p>
<p><img src="otmovie.gif" alt="" class="inline" title="Orszag Tang"/></p>
<p>The Orsaz-Tang test is again nice to test symmetry-preserving properties for schemes, and to compare effects of resolution (by raising the number of AMR levels).</p>
<p>Another representative MHD problem is the GEM challenge, realizing reconnection in resistive MHD. The problem is described e.g. in the book 'Advanced Magnetohydrodynamics. With applications to laboratory and astrophysical plasmas.', J.P. (Hans) Goedbloed, Rony Keppens, &amp; Stefaan Poedts, 2010, Cambridge University Press, 634 pages, <a href="http://www.cambridge.org/uk/catalogue/catalogue.asp?isbn=9780521705240">ISBN 9780521705240 (Paperback)</a>. We show here the case with resistivity parameter set to 0.001.</p>
<p><img src="recmhd.gif" alt="" class="inline" title="Reconnection GEM challenge"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
