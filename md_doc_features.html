<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPI-AMRVAC: Features overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MPI-AMRVAC
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">The MPI - Adaptive Mesh Refinement - Versatile Advection Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Features overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a brief overview of the main features of the MPI-AMRVAC software package.</p>
<h1><a class="anchor" id="feat-structure"></a>
Structure</h1>
<p>This software has to be configured, preprocessed, and compiled into a single main executable program, <b>amrvac</b> which can be run on multiple processors using MPI. MPI-AMRVAC will initialize and advance the unknowns, and perform automated grid refinement to follow all details of the (possibly shock-dominated) flow. The program is split into several logical parts, and heavily uses Fortran 90 modules and dynamic allocation.</p>
<p>Once the configuration and compilation are done, <b>amrvac</b> can advance the solution in time, or can be used to convert previously produced data files to specific other formats for visualization. The data itself will be saved into <code>.dat</code> data files, which each contain a single snapshot of all grids and their unknowns in time, which can be used for eventual restarts. Besides these snapshots, the code can write output in a number of formats, which can directly be visualized with e.g. Paraview or Visit.</p>
<h1><a class="anchor" id="feat-source"></a>
Source Language and Compilation</h1>
<p>The <code>*.t</code> source files of AMRVAC are written in <a class="el" href="md_doc_source.html">dimension independent notation</a>, known as the <em>LASY</em> syntax. A suitably modified (and also simplified) version of the VAC Pre-Processor, <a class="el" href="md_doc_vacpp.html">VACPP</a> translates the source code files to Fortran 90.</p>
<h1><a class="anchor" id="feat-eqns"></a>
Equations</h1>
<p>In general, MPI-AMRVAC aims to solve a system of (primarily hyperbolic) partial differential equations written in conservation form, with optional source terms on the right hand side:</p>
<p><img src="eq.general.gif" alt="" class="inline"/></p>
<p>See <a class="el" href="md_doc_equations.html">equations</a> for more detail.</p>
<h1><a class="anchor" id="feat-grid"></a>
Grid and Boundary</h1>
<p>The following types of finite-volume grids are supported:</p>
<ul>
<li>Cartesian 1D, 1.5D, 2D, 2.5D, 3D</li>
<li>Cylindrical 2D, 2.5D, 3D</li>
<li>Polar 2D, 2.5D, 3D</li>
<li>Spherical 2D, 2.5D, 3D</li>
</ul>
<p>The <b>slab</b>, <b>cylindrical</b> or <b>spherical</b> grids differ in the definition of volumes and surfaces for the grid cells, and there are some extra terms in the equations, like the p/r term in the radial momentum equation for hydrodynamics. These are defined in the <b>addgeometry</b> subroutines for each AMRVACPHYS module. For polar grids the same geometrical source terms are used.</p>
<p>The boundaries are represented by ghost cells around the physical mesh. Of course, for a grid-adaptive computation, internal boundaries are handled appropriately, and the user is expected to interfere only with the physical domain boundaries, which represent 2, 4, or 6 regions depending on the dimensionality (1,2 or 3). The boundary types are defined for each region and each variable separately. The following boundary types are available:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Value of the ghost cell    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">periodic   </td><td class="markdownTableBodyNone">Copied from opposite edge of the mesh    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">symm   </td><td class="markdownTableBodyNone">Reflected from closeby mesh cells    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">asymm   </td><td class="markdownTableBodyNone">Reflected from closeby cells and multiplied by -1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">cont   </td><td class="markdownTableBodyNone">Copied from mesh cell next to the ghost cell    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">special   </td><td class="markdownTableBodyNone">Defined by the specialbound subroutine in AMRVACUSR module   </td></tr>
</table>
<p>The pages on <a class="el" href="md_doc_discretization.html">discretization</a> and <a class="el" href="md_doc_axial.html">axial coordinates</a> provide further information.</p>
<h1><a class="anchor" id="feat-spatial"></a>
Spatial Discretization</h1>
<p>In MPI-AMRVAC, most discretizations are shock capturing conservative numerical schemes. A non exhaustive list is given by:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">cd4   </td><td class="markdownTableBodyNone">4th order central difference scheme    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">tvdlf   </td><td class="markdownTableBodyNone">MUSCL type TVD-Lax-Friedrich    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">tvdmu   </td><td class="markdownTableBodyNone">TVD-MUSCL with Hancock predictor    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">tvd   </td><td class="markdownTableBodyNone">One-step temporally 2nd order TVD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">hll   </td><td class="markdownTableBodyNone">Harten-Lax-van Leer (HLL) solver    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">hllc   </td><td class="markdownTableBodyNone">Harten-Lax-van Leer-Contact (HLLC) solver    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">hlld   </td><td class="markdownTableBodyNone">Harten-Lax-van Leer-Discontinuities (HLLD) solver    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">fd   </td><td class="markdownTableBodyNone">conservative finite differences, up to fifth order with MP5 reconstruction   </td></tr>
</table>
<p>In multidimensional MHD calculations the divergence of the magnetic field may become significantly different from zero. This may cause numerical instability or inaccurate results. There are several source-term options to fix this problem. E.g., Powell non-conservative source terms, which are proportional to div B, can be used to stabilize, and to improve the accuracy for any of the methods. We also provide several variants of the Dedner GLM scheme.</p>
<p>See <a class="el" href="md_doc_methods.html">methods</a> for a more detailed description.</p>
<h1><a class="anchor" id="feat-temporal"></a>
Temporal Discretization</h1>
<p>With the finite volume methods, second order accurate explicit time integration can be obtained by predictor-corrector and multistep Runge-Kutta type discretizations. See <a class="el" href="md_doc_time_discretization.html">time_discretization</a>. In finite differences, the overall accuracy can go up to fourth order using the appropriate temporal discretizations. The more important ones are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">onestep   </td><td class="markdownTableBodyNone">1st order Euler scheme    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">twostep   </td><td class="markdownTableBodyNone">2nd order predictor-corrector schemes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">threestep   </td><td class="markdownTableBodyNone">3rd order (TVD) Runge-Kutta    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">fourstep   </td><td class="markdownTableBodyNone">rk4 allows for selecting 4th order Runge-Kutta (classical)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">fourstep   </td><td class="markdownTableBodyNone">ssprk4 is a 3rd order, strong stability preserving four step Runge-Kutta    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">fivestep   </td><td class="markdownTableBodyNone">ssprk5 is 4th order, strong stability preserving five step Runge-Kutta   </td></tr>
</table>
<p>The time step can be adjusted dynamically to satisfy the stability criteria. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
