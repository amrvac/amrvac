<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPI-AMRVAC: icarus</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MPI-AMRVAC<span id="projectnumber">&#160;3.1</span>
   </div>
   <div id="projectbrief">The MPI - Adaptive Mesh Refinement - Versatile Advection Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">icarus</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>02/10/24</p>
<p>Tinatin Baratashvili</p>
<h1>How to run Icarus testcase</h1>
<p>To run the Icarus test case, you must follow the standard MPI-AMRVAC procedure. First, you install AMRVAC from <a href="https://amrvac.org/md_doc_installation.html">https://amrvac.org/md_doc_installation.html</a>.</p>
<p>In order to get the latest version please checkout amrvac3.2 branch: </p><div class="fragment"><div class="line">git checkout amrvac3.2</div>
</div><!-- fragment --><p> and </p><div class="fragment"><div class="line">git pull</div>
</div><!-- fragment --><p>Then, make sure you are in ~/icarus folder and retrieve the makefile by </p><div class="fragment"><div class="line">setup.pl -d=3</div>
</div><!-- fragment --><p> and compile it with </p><div class="fragment"><div class="line">make -j 4</div>
</div><!-- fragment --><p>you can run the testcase with</p>
<div class="fragment"><div class="line">mpirun -np 4 ./amrvac -i amrvac.par</div>
</div><!-- fragment --><p> Note* 4 here is number of CPUs, can be modified depending on the availability of CPUs.</p>
<h1>Standard testcase description</h1>
<p>This run will be short, to check that it does not crash and can be finished successfully. I would recommend not modifying this amrvac.par file, instead to work with test_icarus.par file which is also uploaded in this directory. By default this testcase runs a simulation in low resolution, uniform grid, without AMR, with 5 cone CMEs. The simulation lasts 24 days and the output is saved after 14 days.</p>
<h1>Necessary files</h1>
<p>The most important files to run Icarus are the</p>
<ul>
<li>User file setting up the simulation (mod_usr.t)</li>
<li>Parameter file that fixes the numerical method, computational domain and Icarus specific settings</li>
<li>The solar wind boundary (.vtk file)</li>
<li>The CME parameter file (.in file)</li>
</ul>
<h1>Setting Icarus parameters</h1>
<p>Icarus-specific parameter list (&amp;icarus_list) in the <code>.par</code> file:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Standard values   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>amr_criterion</code>   </td><td class="markdownTableBodyNone"><code>shock</code>, <code>tracing</code>   </td><td class="markdownTableBodyNone">Default AMR criteria according to Baratashvili et al. 2022    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>cme_flag</code>   </td><td class="markdownTableBodyNone">0, 1   </td><td class="markdownTableBodyNone">0 means no CME injection, 1 activates CME injection    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>num_cmes</code>   </td><td class="markdownTableBodyNone">$\ge$ 0   </td><td class="markdownTableBodyNone">Number of CMEs to be injected. num_cmes $\le$ number of CMEs in the input <code>cme_parameter_file</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>relaxation</code>   </td><td class="markdownTableBodyNone">14   </td><td class="markdownTableBodyNone">Duration is given in days    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>cme_insertion</code>   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Duration is given in days    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>cme_parameter_file</code>   </td><td class="markdownTableBodyNone">'cme_parameters.in'   </td><td class="markdownTableBodyNone">The file containing CME parameters    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>magnetogram_time</code>   </td><td class="markdownTableBodyNone">'2015-06-25T01:04:00'   </td><td class="markdownTableBodyNone">Magnetogram timestamp in 'YYYY-MM-DDTHH:mm:ss' format    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>delta_phi</code>   </td><td class="markdownTableBodyNone">1.2   </td><td class="markdownTableBodyNone">The correction longitude from WSA file given in radians, output of the VTK file generation python script   </td></tr>
</table>
<h1>Changing the parameters</h1>
<p>Some of the settings that you could change in the <code>.par</code> files are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>base_filename</code>   </td><td class="markdownTableBodyNone">Base file name for output    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>tsavestart(2)</code>   </td><td class="markdownTableBodyNone">Time to start saving output 3D data [in hours]    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>dtsave_dat</code>   </td><td class="markdownTableBodyNone">Time between 3D data output [in hours]    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>time_max</code>   </td><td class="markdownTableBodyNone">Time when simulation ends [in hours]    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>time_stepper</code>   </td><td class="markdownTableBodyNone">time discretization method, e.g., twostep, threestep, fourstep    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>flux_scheme</code>   </td><td class="markdownTableBodyNone">spatial discretization method, e.g., tvd, tvdlf, hll    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>limiter</code>   </td><td class="markdownTableBodyNone">which limiter to use in the spatial discretization, e.g., woodward, minmod, koren    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>stretch_dim(1)=uni</code>   </td><td class="markdownTableBodyNone">When uncommented, the grid is stretched radially, when commented it is radially uniform    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>stretch_uncentered=.false.</code>   </td><td class="markdownTableBodyNone">When uncommented, the grid is stretched radially, when commented it is radially uniform    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>refine_max_level</code>   </td><td class="markdownTableBodyNone">The maximum number of refinement levels    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>block_nx1</code>   </td><td class="markdownTableBodyNone">30 if uniform, 6 if radially stretched    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>domain_nx1</code>   </td><td class="markdownTableBodyNone">Domain Resolutions: 300 - low, 600 - middle, 1200 - high    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>domain_nx2</code>   </td><td class="markdownTableBodyNone">Domain Resolutions: 32 - low, 64 - middle, 126 - high    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>domain_nx3</code>   </td><td class="markdownTableBodyNone">Domain Resolutions: 96 - low, 192 - middle, 384 - high    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>xprobmin1</code>   </td><td class="markdownTableBodyNone">Lower boundary in solar radii    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>xprobmax1</code>   </td><td class="markdownTableBodyNone">Outer boundary in solar radii    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>omega_frame</code>   </td><td class="markdownTableBodyNone">The rotation rate of the Sun [radian per hour]    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>boundary_data_file_name</code>   </td><td class="markdownTableBodyNone">The input boundary file in the VTK format   </td></tr>
</table>
<p>A complete list of parameters can be found <a href="https://github.com/amrvac/amrvac/blob/amrvac3.2/doc/par.md">par.md</a>.</p>
<h1>Additional Scripts</h1>
<p>The additional files are uploaded to generate necessary files for Icarus.</p>
<ul>
<li>input_boundary_generate.vtk - this python script generates the input VTK file from the standard WSA output file. If you have multiple WSA standard boundary files, it can combine into the timedependent input file. The paths and information should be indicated correctly in the user definition segment of the script.</li>
<li>convert_output_euhforia_format.py - This python script converts the standard output .csv files which are the satellite to the standard EUHFORIA format with the corresponding satellite names in the filename. -download_trajectory_files.py - This script downloads the trajectory files if you wish to model another case at a time where trajectory files are not availble in the ~/orbit folder. The instructions how to run the code are given at the beginning of the code. The code was developed and the dataset was created by Luka Banović. If you wish to access data individually, you can do so at <a href="https://rdr.kuleuven.be/dataset.xhtml?persistentId=doi:10.48804/TVJAFE">https://rdr.kuleuven.be/dataset.xhtml?persistentId=doi:10.48804/TVJAFE</a> .</li>
</ul>
<p>The mangetogram timestamp should be indicated in the amrvac.par file in the icarus_list. When input_boundary_generate.vtk is run, it outputs in the terminal delta_phi value that should be adjusted in &amp;icarus_list for variable delta_phi.</p>
<h1>How to cite</h1>
<ul>
<li>AMR and grid stretching strategies in Icarus - <a href="https://ui.adsabs.harvard.edu/abs/2022A%26A...667A.133B/abstract">Baratashvili et al. 2022</a></li>
<li>Numerical methods and flux limiters in Icarus - <a href="https://ui.adsabs.harvard.edu/abs/2023SunGe..15...49B/abstract">Baratashvili et al. 2023</a></li>
<li>Magentized CME model in Icarus - <a href="https://ui.adsabs.harvard.edu/abs/2024A%26A...683A..81B/abstract">Baratashvili et al. 2024</a></li>
<li>Multi spacecraft study: Application of the magnetized CME in Icarus - <a href="https://ui.adsabs.harvard.edu/abs/2024A%26A...689A..98B/abstract">Baratashvili et al. 2024b</a></li>
<li>Icarus coupling to COCONUT - <a href="https://ui.adsabs.harvard.edu/abs/2024A%26A...690A.184B/abstract">Baratashvili et al. 2024c</a></li>
<li>Old version of Icarus (for description of the domain, as it is the same) - <a href="https://ui.adsabs.harvard.edu/abs/2022A%26A...662A..50V/abstract">Verbeke et al. 2022</a></li>
<li>Icarus - [Baratashvili et al. 2024d (submitted)] </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
