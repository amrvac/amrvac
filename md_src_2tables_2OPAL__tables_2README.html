<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MPI-AMRVAC: Overview of directory files</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MPI-AMRVAC<span id="projectnumber">&#160;3.2</span>
   </div>
   <div id="projectbrief">The MPI - Adaptive Mesh Refinement - Versatile Advection Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Overview of directory files</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The base directory of the source code contains the following text files by default:</p>
<ul>
<li><code>GN93hz</code>: gives an overview of all currently available Rosseland-mean opacity tabulations from the OPAL project (126 tables in total). All tabulations assume solar abundances from <a href="https://ui.adsabs.harvard.edu/abs/1993oee..conf...15G/abstract">Grevesse &amp; Noels (1993)</a>.</li>
<li><code>Y09800</code>: example OPAL table for a pure helium atmosphere appropriate to model a wind outflows from classical Wolf-Rayet stars (hydrogen mass fraction $X=0$, helium mass fraction $Y=0.98$, metal mass fraction $Z=0.02$).</li>
</ul>
<h1>Generating new tables</h1>
<p>Different Rosseland-mean opacity tabulations can be used in a radiation-hydrodynamic simulation. The procedure for using a different Rosseland-mean opacity tabulation than the provided <code>Y09800</code> table is straightforward. First look up in the overview file <code>GN93hz</code> a suitable table, then copy its content into a new file, and save it accordingly in the current directory.</p>
<p>For example, when opacities from Table 92 are required, create a file with the following header in the current directory:</p>
<div class="fragment"><div class="line">TABLE # 92     $G&amp;N&#39;93 Solar$     X=0.9000 Y=0.1000 Z=0.0000 dXc=0.0000 dXo=0.0000</div>
<div class="line"> </div>
<div class="line">                                                  log R</div>
<div class="line"> </div>
<div class="line">logT  -8.0   -7.5   -7.0   -6.5   -6.0   -5.5   -5.0   -4.5   -4.0   -3.5   -3.0   -2.5   -2.0   -1.5   -1.0   -0.5    0.0    0.5    1.0</div>
<div class="line"> </div>
<div class="line">3.75 -0.700 -0.870 -1.069 -1.281 -1.498 -1.711 -1.911 -2.078 -2.179 -2.182 -2.092 -1.936 -1.746 -1.539 -1.321 -1.097 -0.866 -0.629 -0.389</div>
<div class="line">3.80 -0.473 -0.519 -0.606 -0.735 -0.889 -1.056 -1.217 -1.346 -1.422 -1.419 -1.337 -1.203 -1.026 -0.839 -0.639 -0.431 -0.214  0.013  0.244</div>
<div class="line">3.85 -0.446 -0.445 -0.443 -0.445 -0.466 -0.514 -0.575 -0.630 -0.659 -0.639 -0.573 -0.462 -0.323 -0.164  0.008  0.197  0.391  0.602  0.820</div>
<div class="line">3.90 -0.444 -0.440 -0.426 -0.390 -0.319 -0.217 -0.112 -0.020  0.054  0.120  0.192  0.281  0.391  0.508  0.645  0.804  0.972  1.156  1.351</div>
<div class="line">......</div>
</div><!-- fragment --><p>It is important to not change the original file structure in order to avoid problems with reading in the table. In essence this means the newly created file containing a table should count 70 lines with different $log_{10}(T)$ values, as is standard for OPAL tables, and 19 columns with different $log_{10}(\rho)$ values. Additionally, the user can provide a custom directory, different from this AMRVAC directory, where such table files are stored (in the same format).</p>
<h1>How-to</h1>
<p>There are essentially two ways to use a (new) OPAL opacity table in a simulation.</p>
<ol type="1">
<li>When using the FLD module of the code, the filename containing the table can be passed as a string to the <code>fld_opal_table</code> variable within the <code>fld_list</code> namelist. By default the FLD module will use the already included <code>Y09800</code> table.</li>
<li>When requiring the tables inside <code>mod_usr.t</code> the user needs to import some subroutines from <code><a class="el" href="mod__opal__opacity_8t.html">mod_opal_opacity.t</a></code>. Firstly, the table needs to be initialised by calling the subroutine <code>init_opal_table</code>. This should be done once, for example, inside the subroutine <code>initglobaldata_usr</code>. Secondly, to apply the values from the table to a given problem (e.g. boundary condition, source term computation), include a call to the subroutine <code>set_opal_opacity</code>. See <code><a class="el" href="mod__opal__opacity_8t.html">mod_opal_opacity.t</a></code> for what arguments these subroutines require in their calls. An example of how to call OPAL tables inside the <code>mod_usr.t</code> file is given by the Wolf-Rayet stellar wind test problems of the rhd module. (Note: these test problems also rely on the FLD module, but this is not a prerequisite to use the tables.) </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
